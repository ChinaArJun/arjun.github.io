(window.webpackJsonp=window.webpackJsonp||[]).push([[201],{637:function(e,t,a){"use strict";a.r(t);var s=a(44),v=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"_2-2-如此，用dep获取私有库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-如此，用dep获取私有库"}},[e._v("#")]),e._v(" 2.2 如此，用dep获取私有库")]),e._v(" "),a("h2",{attrs:{id:"介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#介绍"}},[e._v("#")]),e._v(" 介绍")]),e._v(" "),a("p",[a("code",[e._v("dep")]),e._v("是一个依赖管理工具。它需要1.9或更新的"),a("code",[e._v("Golang")]),e._v("版本才能编译")]),e._v(" "),a("p",[a("code",[e._v("dep")]),e._v("已经能够在生产环节安全使用，但还在官方的试验阶段，也就是还不在"),a("code",[e._v("go tool")]),e._v("中。但我想是迟早的事 :=)")]),e._v(" "),a("p",[e._v("指南和参考资料，请参阅"),a("a",{attrs:{href:"https://golang.github.io/dep/",target:"_blank",rel:"noopener noreferrer"}},[e._v("文档"),a("OutboundLink")],1)]),e._v(" "),a("h2",{attrs:{id:"获取私有库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取私有库"}},[e._v("#")]),e._v(" 获取私有库")]),e._v(" "),a("p",[e._v("我们常用的"),a("code",[e._v("git")]),e._v("方式有两种，第一种是通过"),a("code",[e._v("ssh")]),e._v("，第二种是"),a("code",[e._v("https")])]),e._v(" "),a("p",[e._v("本文中我们以"),a("code",[e._v("gitlab.com")]),e._v("为案例，创建一个"),a("code",[e._v("private")]),e._v("的私有仓库")]),e._v(" "),a("h3",{attrs:{id:"通过ssh方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过ssh方式"}},[e._v("#")]),e._v(" 通过"),a("code",[e._v("ssh")]),e._v("方式")]),e._v(" "),a("p",[e._v("首先我们需要在本机上生成"),a("code",[e._v("ssh-key")]),e._v("，若没有生成过可右拐"),a("a",{attrs:{href:"https://segmentfault.com/a/1190000013450267",target:"_blank",rel:"noopener noreferrer"}},[e._v("传送门"),a("OutboundLink")],1)]),e._v(" "),a("p",[e._v("得到需要使用的"),a("code",[e._v("ssh-key")]),e._v("后，我们打开我们的"),a("code",[e._v("gitlab.com")]),e._v("，复制粘贴入我们的"),a("code",[e._v("Settings")]),e._v(" -> "),a("code",[e._v("SSH Keys")]),e._v("中")]),e._v(" "),a("p",[a("img",{attrs:{src:"https://sfault-image.b0.upaiyun.com/105/328/1053288135-5a96d458e9145",alt:"image"}})]),e._v(" "),a("p",[e._v("添加成功后，我们直接在"),a("code",[e._v("Gopkg.toml")]),e._v("里配置好我们的参数")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[[constraint]]\n  branch = "master"\n  name = "gitlab.com/eddycjy/test"\n  source = "git@gitlab.com:EDDYCJY/test.git"\n')])])]),a("p",[e._v("在拉取资源前，要注意假设你是第一次用该"),a("code",[e._v("ssh-key")]),e._v("拉取，需要先手动用"),a("code",[e._v("git clone")]),e._v("拉取一遍，同意"),a("code",[e._v("ECDSA key fingerprint")]),e._v("：")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("$ git clone git@gitlab.com:EDDYCJY/test.git\nCloning into 'test'...\nThe authenticity of host 'gitlab.com (52.167.219.168)' can't be established.\nECDSA key fingerprint is xxxxxxxxxxxxx.\nAre you sure you want to continue connecting (yes/no)? yes\n...\n")])])]),a("p",[e._v("接下来，我们在项目下"),a("strong",[e._v("直接执行"),a("code",[e._v("dep ensure")]),e._v("就可以拉取")]),e._v("下来了！")]),e._v(" "),a("h4",{attrs:{id:"问题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[e._v("#")]),e._v(" 问题")]),e._v(" "),a("ol",[a("li",[a("p",[e._v("假设你是第一次，又没有执行上面那一步（"),a("code",[e._v("ECDSA key fingerprint")]),e._v("），会一直卡住")])]),e._v(" "),a("li",[a("p",[e._v("正确的反馈应当是执行完命令后没有错误，但如果出现该错误提示，那说明该存储仓库没有被纳入"),a("code",[e._v("dep")]),e._v("中（例："),a("code",[e._v("gitee")]),e._v("）")])])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('$ dep ensure\n\nThe following issues were found in Gopkg.toml:\n\nunable to deduce repository and source type for "xxxx": unable to read metadata: go-import metadata not found\n\nProjectRoot name validation failed\n')])])]),a("h3",{attrs:{id:"通过https方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通过https方式"}},[e._v("#")]),e._v(" 通过"),a("code",[e._v("https")]),e._v("方式")]),e._v(" "),a("p",[e._v("我们直接在"),a("code",[e._v("Gopkg.toml")]),e._v("里配置好我们的参数")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('[[constraint]]\n  branch = "master"\n  name = "gitlab.com/eddycjy/test"\n  source = "https://{username}:{password}@gitlab.com"\n')])])]),a("p",[e._v("主要是修改"),a("code",[e._v("source")]),e._v("的配置项，"),a("code",[e._v("username")]),e._v("填写在"),a("code",[e._v("gitlab")]),e._v("的用户名，"),a("code",[e._v("password")]),e._v("为密码")]),e._v(" "),a("p",[e._v("最后回到项目下"),a("strong",[e._v("执行"),a("code",[e._v("dep ensure")]),e._v("拉取资源")]),e._v("就可以了")]),e._v(" "),a("h2",{attrs:{id:"最后"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#最后"}},[e._v("#")]),e._v(" 最后")]),e._v(" "),a("p",[a("code",[e._v("dep")]),e._v("目前还是官方试验阶段，还可能存在变数，多加注意")])])}),[],!1,null,null,null);t.default=v.exports}}]);